import { getPlatformIcon, getPlatformName } from "@/utils/platform-mapping";

interface PlatformIconProps {
  platformSlug: string;
  className?: string;
}

const svgContentMap: Record<string, { viewBox: string; path: string }> = {
  pc: {
    viewBox: "0 0 16 16",
    path: "M0 13.772l6.545.902V8.426H0zM0 7.62h6.545V1.296L0 2.198zm7.265 7.15l8.704 1.2V8.425H7.265zm0-13.57v6.42h8.704V0z",
  },
  web: {
    viewBox: "0 0 16 16",
    path: "M0 13.772l6.545.902V8.426H0zM0 7.62h6.545V1.296L0 2.198zm7.265 7.15l8.704 1.2V8.425H7.265zm0-13.57v6.42h8.704V0z",
  },
  macos: {
    viewBox: "0 0 20 22",
    path: "M13.56 2.17c-1.06.32-2.17 1.28-2.62 2.27-.28.62-.43 1.34-.36 1.72.05.25.07.26.51.2 1.09-.14 2.21-.99 2.76-2.07.44-.86.64-2.3.32-2.28-.07 0-.34.07-.61.16zm-6.88 4.28c-1.48.42-2.76 1.61-3.35 3.11-.26.65-.27.79-.28 2.34 0 1.81.13 2.49.75 4.01.76 1.84 2.16 3.69 3.21 4.25.58.31 1.49.25 2.49-.16.74-.3.96-.34 1.7-.34.75 0 .96.04 1.76.37 1.11.45 1.6.47 2.31.11.91-.45 2.25-2.1 3.11-3.83.35-.7.36-.75.18-.85-1.67-.98-2.39-2.11-2.4-3.76-.01-1.36.51-2.42 1.57-3.2l.48-.35-.59-.56c-1.39-1.31-2.92-1.57-4.97-.85-1.26.45-1.65.45-3.05.01-1.28-.4-2.23-.5-2.92-.3z",
  },
  linux: {
    viewBox: "0 0 15 18",
    path: "M14.52 14.452c-.513-.216-.733-.503-.712-.93.022-.5-.254-.866-.385-1.01.079-.312.31-1.386 0-2.32-.334-.999-1.352-2.525-2.403-4.025-.43-.616-.45-1.285-.474-2.06-.022-.74-.048-1.579-.45-2.51C9.66.582 8.785 0 7.694 0a3.23 3.23 0 00-1.829.572c-1.05.744-.91 2.366-.819 3.44.013.147.024.286.031.404.061 1.052.006 1.606-.067 1.774-.047.11-.279.423-.524.755-.254.343-.541.732-.777 1.094-.281.436-.508 1.103-.728 1.747-.16.471-.312.917-.46 1.183-.28.512-.21.99-.152 1.21-.106.076-.259.225-.388.505-.156.342-.473.526-1.132.657-.303.063-.512.194-.621.388-.16.283-.073.638.006.881.117.357.044.583-.088.993-.03.095-.065.202-.1.32a.59.59 0 00.06.504c.248.391.974.529 1.722.62.447.054.935.237 1.408.415.463.173.942.353 1.377.408.066.008.131.012.195.012.657 0 .954-.447 1.048-.631a11.36 11.36 0 011.889-.23 8 8 0 011.878.199c.072.142.262.466.566.633.166.093.398.147.636.147.254 0 .737-.062 1.119-.475.38-.414 1.333-.944 2.029-1.33.155-.087.3-.167.427-.24.39-.223.604-.54.585-.872a.735.735 0 00-.463-.63zm-8.647-.08c-.049-.351-.49-.7-1-1.104-.417-.33-.89-.705-1.02-1.022-.27-.654-.057-1.804.313-2.396.183-.296.332-.746.477-1.18.156-.47.317-.956.497-1.168.286-.332.55-.978.597-1.486.267.262.682.595 1.066.595a.613.613 0 00.17-.024c.263-.078.649-.307 1.022-.528.322-.191.718-.426.868-.448.256.378 1.743 3.757 1.895 4.842a5.266 5.266 0 01-.071 1.847 1.289 1.289 0 00-.177-.013c-.414 0-.524.232-.552.37-.074.36-.082 1.512-.082 1.771-.15.195-.908 1.116-1.995 1.281-.443.066-.857.1-1.23.1-.318 0-.521-.026-.606-.039l-.546-.642c.215-.109.43-.34.374-.755zm.693-10.586a.863.863 0 00-.05.024 1.073 1.073 0 00-.011-.115c-.06-.353-.288-.609-.542-.609a.373.373 0 00-.058.005c-.151.026-.27.142-.335.308.057-.363.257-.631.495-.631.278 0 .514.385.514.842 0 .057-.004.115-.013.176zm2.166.272a.916.916 0 00.04-.268c0-.414-.256-.738-.583-.738-.319 0-.578.331-.578.738 0 .028 0 .056.003.084a10.386 10.386 0 00-.05-.02A1.156 1.156 0 017.51 3.5c0-.495.308-.898.686-.898.38 0 .687.403.687.898 0 .206-.055.403-.15.559zm-.28.963c-.005.025-.016.036-.145.105a3.894 3.894 0 00-.246.14l-.067.043c-.272.168-.907.564-1.079.587-.117.016-.19-.03-.352-.144a5.075 5.075 0 00-.118-.08c-.293-.198-.482-.416-.503-.501.095-.076.333-.266.454-.379.247-.235.495-.393.617-.393l.019.001c.144.027.5.172.76.279.12.049.224.092.297.118.23.082.35.185.364.224zM10.52 16.02c.13-.6.279-1.418.255-1.9-.006-.11-.015-.229-.024-.344-.017-.215-.043-.535-.017-.63a.11.11 0 01.018-.007c0 .276.06.825.487 1.017.128.057.273.086.433.086.429 0 .904-.216 1.1-.416a2.05 2.05 0 00.278-.376.465.465 0 01.02.177c-.026.406.166.945.532 1.144l.053.029c.13.07.477.257.482.345 0 0-.003.01-.022.03-.087.08-.392.24-.687.395-.524.275-1.117.586-1.384.874-.375.406-.8.678-1.056.678a.27.27 0 01-.084-.012c-.278-.09-.507-.502-.384-1.09zm-9.49-1.533c-.028-.136-.05-.244-.026-.348.017-.078.39-.16.548-.196.223-.05.454-.101.605-.195.204-.127.314-.361.412-.568.07-.15.143-.304.23-.354a.048.048 0 01.027-.007c.162 0 .503.351.7.665.05.08.142.238.248.421.32.55.757 1.3.985 1.553.206.226.54.661.457 1.035-.06.29-.379.525-.454.577a.454.454 0 01-.101.01c-.438 0-1.303-.374-1.768-.574l-.068-.03c-.26-.112-.684-.182-1.094-.25-.326-.055-.772-.129-.846-.196-.06-.069.01-.294.07-.492.045-.142.09-.29.115-.444a1.634 1.634 0 00-.04-.607z",
  },
  playstation: {
    viewBox: "0 0 21 16",
    path: "M11.112 16L8 14.654V0s6.764 1.147 7.695 3.987c.931 2.842-.52 4.682-1.03 4.736-1.42.15-1.96-.748-1.96-.748V3.39l-1.544-.648L11.112 16zM12 14.32V16s7.666-2.338 8.794-3.24c1.128-.9-2.641-3.142-4.666-2.704 0 0-2.152.099-4.102.901-.019.008 0 1.51 0 1.51l4.948-1.095 1.743.73L12 14.32zm-5.024-.773s-.942.476-3.041.452c-2.1-.024-3.959-.595-3.935-1.833C.024 10.928 3.476 9.571 6.952 9v1.738l-3.693.952s-.632.786.217.81A11.934 11.934 0 007 12.046l-.024 1.5z",
  },
  xbox: {
    viewBox: "0 0 16 16",
    path: "M3.564 1.357l-.022.02c.046-.048.11-.1.154-.128C4.948.435 6.396 0 8 0c1.502 0 2.908.415 4.11 1.136.086.052.324.215.446.363C11.4.222 7.993 2.962 7.993 2.962c-1.177-.908-2.26-1.526-3.067-1.746-.674-.185-1.14-.03-1.362.141zm10.305 1.208c-.035-.04-.074-.076-.109-.116-.293-.322-.653-.4-.978-.378-.295.092-1.66.584-3.342 2.172 0 0 1.894 1.841 3.053 3.723 1.159 1.883 1.852 3.362 1.426 5.415A7.969 7.969 0 0016 7.999a7.968 7.968 0 00-2.13-5.434zM10.98 8.77a55.416 55.416 0 00-2.287-2.405 52.84 52.84 0 00-.7-.686l-.848.854c-.614.62-1.411 1.43-1.853 1.902-.787.84-3.043 3.479-3.17 4.958 0 0-.502-1.174.6-3.88.72-1.769 2.893-4.425 3.801-5.29 0 0-.83-.913-1.87-1.544l-.007-.002s-.011-.009-.03-.02c-.5-.3-1.047-.53-1.573-.56a1.391 1.391 0 00-.878.431A8 8 0 0013.92 13.381c0-.002-.169-1.056-1.245-2.57-.253-.354-1.178-1.46-1.696-2.04z",
  },
  xbox360: {
    viewBox: "0 0 16 16",
    path: "M3.564 1.357l-.022.02c.046-.048.11-.1.154-.128C4.948.435 6.396 0 8 0c1.502 0 2.908.415 4.11 1.136.086.052.324.215.446.363C11.4.222 7.993 2.962 7.993 2.962c-1.177-.908-2.26-1.526-3.067-1.746-.674-.185-1.14-.03-1.362.141zm10.305 1.208c-.035-.04-.074-.076-.109-.116-.293-.322-.653-.4-.978-.378-.295.092-1.66.584-3.342 2.172 0 0 1.894 1.841 3.053 3.723 1.159 1.883 1.852 3.362 1.426 5.415A7.969 7.969 0 0016 7.999a7.968 7.968 0 00-2.13-5.434zM10.98 8.77a55.416 55.416 0 00-2.287-2.405 52.84 52.84 0 00-.7-.686l-.848.854c-.614.62-1.411 1.43-1.853 1.902-.787.84-3.043 3.479-3.17 4.958 0 0-.502-1.174.6-3.88.72-1.769 2.893-4.425 3.801-5.29 0 0-.83-.913-1.87-1.544l-.007-.002s-.011-.009-.03-.02c-.5-.3-1.047-.53-1.573-.56a1.391 1.391 0 00-.878.431A8 8 0 0013.92 13.381c0-.002-.169-1.056-1.245-2.57-.253-.354-1.178-1.46-1.696-2.04z",
  },
  nintendo: {
    viewBox: "0 0 21 16",
    path: "M8 0h5a8 8 0 110 16H8A8 8 0 118 0zm-.135 1.935a6.065 6.065 0 000 12.13h5.12a6.065 6.065 0 000-12.13h-5.12zm-1.33 2.304h2.401l3.199 5.175V4.24h2.346v7.495H12.18L8.864 6.537v5.201H6.53l.005-7.499z",
  },
  android: {
    viewBox: "0 0 16 18",
    path: "M1.168 5.86H1.12c-.614 0-1.115.482-1.115 1.07v4.665c0 .59.5 1.071 1.115 1.071h.049c.614 0 1.115-.482 1.115-1.071V6.93c0-.589-.502-1.072-1.116-1.072zm1.65 7.535c0 .541.46.983 1.025.983h1.095v2.519c0 .591.503 1.073 1.116 1.073h.048c.615 0 1.116-.482 1.116-1.073v-2.52H8.75v2.52c0 .591.504 1.073 1.117 1.073h.047c.615 0 1.116-.482 1.116-1.073v-2.52h1.096c.564 0 1.025-.44 1.025-.982V6.03H2.818v7.364zm7.739-11.83l.87-1.29a.173.173 0 00-.054-.246.188.188 0 00-.256.052l-.902 1.335A6.092 6.092 0 007.985 1a6.1 6.1 0 00-2.232.416L4.853.08a.19.19 0 00-.257-.05.173.173 0 00-.055.246l.871 1.29c-1.57.739-2.628 2.131-2.628 3.729 0 .098.006.195.015.29H13.17c.009-.095.014-.192.014-.29 0-1.598-1.059-2.99-2.628-3.73zM5.58 3.875a.489.489 0 01-.5-.48c0-.265.224-.478.5-.478.277 0 .5.213.5.478a.489.489 0 01-.5.48zm4.809 0a.489.489 0 01-.5-.48c0-.265.224-.478.5-.478s.498.213.498.478a.488.488 0 01-.498.48zm4.458 1.985h-.046c-.614 0-1.117.482-1.117 1.07v4.665c0 .59.503 1.071 1.117 1.071h.047c.615 0 1.115-.482 1.115-1.071V6.93c0-.589-.501-1.072-1.116-1.072z",
  },
  ios: {
    viewBox: "0 0 11 18",
    path: "M9.538 0H1.651C.896 0 .287.587.287 1.31v15.368c0 .723.61 1.31 1.364 1.31h7.887c.754 0 1.364-.587 1.364-1.31V1.31c0-.723-.61-1.31-1.364-1.31zm-5.89.796h3.894c.098 0 .178.14.178.315 0 .174-.08.316-.178.316H3.648c-.099 0-.177-.142-.177-.316 0-.174.078-.315.177-.315zm1.947 15.898c-.48 0-.87-.375-.87-.836 0-.462.39-.835.87-.835s.87.373.87.835c0 .461-.39.836-.87.836zM9.88 13.83H1.31V2.21h8.57v11.62z",
  },
};

const PlatformIcon = ({
  platformSlug,
  className = "w-4 h-4",
}: PlatformIconProps) => {
  const iconPath = getPlatformIcon(platformSlug);
  const platformName = getPlatformName(platformSlug);
  const svgContent = svgContentMap[platformSlug];

  if (!iconPath || !svgContent) {
    return (
      <span
        className={`inline-flex items-center justify-center text-xs font-medium text-zinc-400 ${className}`}
        title={platformName}
      >
        {platformSlug.slice(0, 3).toUpperCase()}
      </span>
    );
  }

  return (
    <div
      className={`inline-flex items-center justify-center ${className}`}
      title={platformName}
    >
      <svg
        className="h-full w-full fill-current text-zinc-300"
        viewBox={svgContent.viewBox}
      >
        <path d={svgContent.path} fill="currentColor" />
      </svg>
    </div>
  );
};

export default PlatformIcon;
